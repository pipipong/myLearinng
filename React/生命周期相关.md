# React生命周期

# 相关的问题

### 父组件更改子组件props并未刷新的问题

**解决方案1**

尝试更改组件的key来使组件刷新

```jsx
<Child key={key}>
	子组件
</Child>
```

**解决方案2**

使用react新的生命周期函数`static getDerivedStateFromProps(nextProps, prevState)`来控制组件的刷新

```js
static getDerivedStateFromProps(nextProps, prevState){
    const {location} = nextProps;
    // 根据自己的意图来决定是否更新state
    if(location.state && location.state.userDefinedKey && location.state.timer) {
        return {// 这里就是更新state数据的地方
            searchParams:{
                plate: '',
                starTime:location.state.timer.starTime,
                endTime:location.state.timer.endTime
            },
            userDefinedKey:location.state.userDefinedKey
        };
    }
    // 否则，对于state不进行任何操作
    return null;
}
```



